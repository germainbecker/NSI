<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 style="font-size:2.5em; text-align:center">Documenter et tester un programme</h1><hr>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Introduction">Introduction<a class="anchor-link" href="#Introduction">&#182;</a></h1><p><img class="centre image-responsive" src="data/documentation_mise_au_point.png"></p>
<p>Lorsqu'on <em>utilise</em> une fonction, il n'est pas utile de conna√Ætre ni m√™me de comprendre le code qui la d√©finit mais on a absolument besoin de conna√Ætre son r√¥le, autrement dit de savoir ce que <em>fait</em> cette fonction. Cela signifie que le programmeur ne peut donc pas se contenter d'√©crire uniquement le code de la fonction mais il doit s'assurer d'<strong>expliquer ce que fait son programme</strong> afin que d'autres puissent l'utiliser : pour cela, le programmeur doit cr√©er une <strong>documentation</strong>.</p>
<p>De plus, pour √©crire sa fonction, le programmeur doit s'assurer que <strong>son programme se comporte convenablement</strong>, autrement dit que la fonction renvoie la (ou les) valeur(s) attendue(s), et ce quelles que soient les valeurs (admissibles) des param√®tres. Pour cela, le programmeur doit √©crire un ou plusieurs <strong>jeux de tests</strong> et s'assurer que les tests passent avec succ√®s. C'est une √©tape importante voire cruciale s'il s'agit par exemple d'un programme intervenant dans le pilotage d'un avion.</p>
<p>Vous aller d√©couvrir dans ce chapitre les bonnes pratiques qui permettent au programmeur d'effectuer ces deux t√¢ches.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Que-&#171;-fait-&#187;-un-programme-?">Que &#171; fait &#187; un programme ?<a class="anchor-link" href="#Que-&#171;-fait-&#187;-un-programme-?">&#182;</a></h1><p>Consid√©rons la fonction Python suivante qui a √©t√© cod√©e par l'un de vos camarades et que vous devez utiliser dans votre projet.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="n">r</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">r</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>En la recevant telle quelle, il n'est pas √©vident que vous sachiez √† quoi elle sert. En l'analysant un peu il est possible de comprendre ce que fait cette fonction mais on n'en a pas toujours ni le temps ni l'envie (surtout si ce n'est pas notre travail !)</p>
<blockquote><p><span style="font-size:1.5em">ü§î</span> Alors, elle fait quoi selon vous ?</p>
</blockquote>
<p>Ainsi, le version ci-dessous aurait d√©j√† √©t√© plus parlante :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">puissance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="n">r</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">r</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Un nommage explicite est donc une premi√®re (bonne) √©tape mais elle n'est pas suffisante. En effet, on se doute d√©sormais que cette fonction calcule une puissance mais c'est √† peu pr√®s tout :</p>
<ul>
<li>est-ce $x^n$ ? ou  $n^x$ ? ou autre chose ? ...</li>
<li>est-ce que cela marche pour n'importe quelles valeurs de <code>x</code> et de <code>n</code> ? ...</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Documenter-son-programme">Documenter son programme<a class="anchor-link" href="#Documenter-son-programme">&#182;</a></h1><p>La bonne pratique pour un codeur est de toujours expliquer son programme (ici sa fonction). Pour cela, une premi√®re m√©thode peut consister √† commenter son code de la fa√ßon suivante.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># fonction qui renvoie la valeur de x^n</span>
<span class="k">def</span> <span class="nf">puissance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="n">r</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">r</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Cela donne l'information √† celui qui a acc√®s au code mais pas aux autres : si par exemple cette fonction appartient √† une biblioth√®que que l'on importe, nous n'avons pas directement acc√®s au code de la fonction ni √† ce commentaire et donc nous ne serions pas beaucoup plus avanc√©...</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#201;crire-son-propre-texte-d'aide-dans-la-cha&#238;ne-de-documentation">&#201;crire son propre texte d'aide dans la <em>cha&#238;ne de documentation</em><a class="anchor-link" href="#&#201;crire-son-propre-texte-d'aide-dans-la-cha&#238;ne-de-documentation">&#182;</a></h2><p>Il existe une meilleure fa√ßon d'expliquer son code. Pour cela, on associera une <em>documentation</em> √† notre fonction sous la forme d'une cha√Æne de caract√®res √©crites entre triples guillemets.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">puissance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Renvoie la valeur de x^n.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">r</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>On appelle cela la <strong>cha√Æne de documentation</strong> de la fonction (ou <strong>docstring</strong> en anglais). En proc√©dant ainsi, le programmeur de la fonction permet √† quiconque d'afficher cette cha√Æne de caract√®res en utilisant la fonction <code>help</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">puissance</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Help on function puissance in module __main__:

puissance(x, n)
    Renvoie la valeur de x^n.

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Vous pouvez essayer d'afficher la docstring de fonctions connues.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="nb">abs</span><span class="p">)</span>  <span class="c1"># abs est la fonction valeur absolue</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Help on built-in function abs in module builtins:

abs(x, /)
    Return the absolute value of the argument.

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="nb">len</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Help on built-in function len in module builtins:

len(obj, /)
    Return the number of items in a container.

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Maintenant que l'on sait mieux ce que fait cette fonction on peut facilement l'utiliser pour calculer par exemple $2^3$, $\left(\dfrac{1}{2}\right)^2$, $(-2)^5$ :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">puissance</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1"># renvoie bien la valeur de 2^3</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[8]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>8</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">puissance</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c1"># renvoie bien la valeur de (1/2)^2 = 1/4</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[9]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>0.25</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">puissance</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="c1"># renvoie bien la valeur de (-2)^5 = -32</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[10]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>-32</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Cependant, en faisant d'autres tests on se rend vite compte que l'on ne peut pas calculer certaines puissances avec la fonction :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">puissance</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># ne renvoie pas la valeur de 2^(-3) = 1/8</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[11]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>1</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">puissance</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># ne renvoie pas la valeur de 4^(1/2) = 2 mais l√®ve une erreur</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-intense-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-intense-fg ansi-bold">TypeError</span>                                 Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">&lt;ipython-input-12-de97611f6342&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">----&gt; 1</span><span class="ansi-yellow-intense-fg ansi-bold"> </span>puissance<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-cyan-intense-fg ansi-bold">4</span><span class="ansi-yellow-intense-fg ansi-bold">,</span> <span class="ansi-cyan-intense-fg ansi-bold">1</span><span class="ansi-yellow-intense-fg ansi-bold">/</span><span class="ansi-cyan-intense-fg ansi-bold">2</span><span class="ansi-yellow-intense-fg ansi-bold">)</span> <span class="ansi-red-intense-fg ansi-bold"># ne renvoie pas la valeur de 4^(1/2) = 2 mais l√®ve une erreur</span>

<span class="ansi-green-intense-fg ansi-bold">&lt;ipython-input-4-81cdac8eae66&gt;</span> in <span class="ansi-cyan-fg">puissance</span><span class="ansi-blue-intense-fg ansi-bold">(x, n)</span>
<span class="ansi-green-fg">      4</span>     &#34;&#34;&#34;
<span class="ansi-green-fg">      5</span>     r <span class="ansi-yellow-intense-fg ansi-bold">=</span> <span class="ansi-cyan-intense-fg ansi-bold">1</span>
<span class="ansi-green-intense-fg ansi-bold">----&gt; 6</span><span class="ansi-yellow-intense-fg ansi-bold">     </span><span class="ansi-green-intense-fg ansi-bold">for</span> i <span class="ansi-green-intense-fg ansi-bold">in</span> range<span class="ansi-yellow-intense-fg ansi-bold">(</span>n<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-fg">      7</span>         r <span class="ansi-yellow-intense-fg ansi-bold">=</span> r <span class="ansi-yellow-intense-fg ansi-bold">*</span> x
<span class="ansi-green-fg">      8</span>     <span class="ansi-green-intense-fg ansi-bold">return</span> r

<span class="ansi-red-intense-fg ansi-bold">TypeError</span>: &#39;float&#39; object cannot be interpreted as an integer</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#202;tre-pr&#233;cis-dans-sa-documentation">&#202;tre pr&#233;cis dans sa documentation<a class="anchor-link" href="#&#202;tre-pr&#233;cis-dans-sa-documentation">&#182;</a></h2><p>L'objectif d'une <strong>cha√Æne de documentation</strong> est d'√™tre courte mais aussi <em>pr√©cise</em>.</p>
<p>On voit sur les deux derniers appels que la fonction ne permet pas de calculer correctement une puissance si l'exposant est n√©gatif ou si l'exposant n'est pas entier. La cha√Æne de documentation de la fonction n'√©tait donc pas assez pr√©cise.</p>
<p>De mani√®re g√©n√©rale, la cha√Æne de documentation d'une fonction doit contenir sa <strong>sp√©cification</strong>, c'est-√†-dire :</p>
<ul>
<li>son <strong>r√¥le</strong></li>
<li>les param√®tres ainsi que les valeurs accept√©es de ces param√®tres (= <strong>pr√©condition</strong>)</li>
<li>la (les) valeur(s) qu'elle renvoie ainsi que d'√©ventuelles conditions sur ces valeurs (= <strong>postcondition</strong>)</li>
</ul>
<p>Ainsi, la version suivante de notre chaine de documentation est bien meilleure car elle indique quelles sont les conditions (sur les param√®tres) d'utilisation de la fonction.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">puissance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Renvoie la valeur de x^n, o√π x est un flottant et n est un entier positif ou nul.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">r</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Ou encore, de mani√®re plus "professionnelle", on peut √©crire :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">puissance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Renvoie la valeur de x^n.</span>
<span class="sd">    </span>
<span class="sd">    Param√®tres</span>
<span class="sd">    ----------    </span>
<span class="sd">        x : float</span>
<span class="sd">        n : int</span>
<span class="sd">            n doit √™tre positif ou nul</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">r</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p><span style="font-size:1.5em">‚úçÔ∏è</span> <strong>√Ä FAIRE :</strong> Exercices 1 et 2</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Programmation-d&#233;fensive">Programmation d&#233;fensive<a class="anchor-link" href="#Programmation-d&#233;fensive">&#182;</a></h1><p>Si une fonction est bien document√©e et qu'elle est correcte, on peut consid√©rer que le travail du programmeur (de la fonction) a √©t√© fait correctement. Cependant, rien n'emp√™che d'utiliser cette fonction avec des param√®tres d'entr√©e ne respectant pas les pr√©conditions d√©finies dans la docstring : mais l'erreur incombe alors √† l'utilisateur qui, soit n'a pas lu correctement la documentation, soit a volontairement test√© la fonction avec des valeurs non admises.</p>
<p>Pour parer √† cela, le programmeur a la possibilit√© d'utiliser la construction <code>assert</code> suivie d'une condition √† tester.</p>
<p>Si cette condition est vraie, alors il ne se passe rien et le programme poursuit son ex√©cution :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Cas d&#39;un test valide</span>
<span class="n">a</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span>
<span class="k">assert</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="mi">0</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>  <span class="c1"># est ex√©cut√© car l&#39;assertion pr√©c√©dente est vraie</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>-2
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>En revanche, si la condition est fausse, alors une erreur (de type <code>AssetionError</code>, soit <em>erreur d'assertion</em>) est d√©tect√©e et stoppe l'ex√©cution du reste du programme.</p>
<p>Par exemple, le test invalide suivant produit l'affichage d'un message d'erreur et stoppe le programme (ici la derni√®re ligne n'est pas ex√©cut√©e)</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Cas d&#39;un test invalide</span>
<span class="n">a</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span>
<span class="k">assert</span> <span class="n">a</span> <span class="o">&gt;=</span> <span class="mi">0</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>  <span class="c1"># n&#39;est pas ex√©cut√© car l&#39;assertion pr√©c√©dente est fausse</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-intense-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-intense-fg ansi-bold">AssertionError</span>                            Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">&lt;ipython-input-16-2b60d98e5060&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">      1</span> <span class="ansi-red-intense-fg ansi-bold"># Cas d&#39;un test invalide</span>
<span class="ansi-green-fg">      2</span> a <span class="ansi-yellow-intense-fg ansi-bold">=</span> <span class="ansi-yellow-intense-fg ansi-bold">-</span><span class="ansi-cyan-intense-fg ansi-bold">2</span>
<span class="ansi-green-intense-fg ansi-bold">----&gt; 3</span><span class="ansi-yellow-intense-fg ansi-bold"> </span><span class="ansi-green-intense-fg ansi-bold">assert</span> a <span class="ansi-yellow-intense-fg ansi-bold">&gt;=</span> <span class="ansi-cyan-intense-fg ansi-bold">0</span>
<span class="ansi-green-fg">      4</span> print<span class="ansi-yellow-intense-fg ansi-bold">(</span>a<span class="ansi-yellow-intense-fg ansi-bold">)</span>  <span class="ansi-red-intense-fg ansi-bold"># n&#39;est pas ex√©cut√© car l&#39;assertion pr√©c√©dente est fausse</span>

<span class="ansi-red-intense-fg ansi-bold">AssertionError</span>: </pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>On peut faire suivre la condition √† tester d'un message pour expliquer l'erreur</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># ajout du message √† afficher en cas d&#39;erreur</span>
<span class="n">a</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span>
<span class="k">assert</span> <span class="n">a</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;le nombre a n&#39;est pas positif&quot;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-intense-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-intense-fg ansi-bold">AssertionError</span>                            Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">&lt;ipython-input-17-c989dabdadf5&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">      1</span> <span class="ansi-red-intense-fg ansi-bold"># ajout du message √† afficher en cas d&#39;erreur</span>
<span class="ansi-green-fg">      2</span> a <span class="ansi-yellow-intense-fg ansi-bold">=</span> <span class="ansi-yellow-intense-fg ansi-bold">-</span><span class="ansi-cyan-intense-fg ansi-bold">2</span>
<span class="ansi-green-intense-fg ansi-bold">----&gt; 3</span><span class="ansi-yellow-intense-fg ansi-bold"> </span><span class="ansi-green-intense-fg ansi-bold">assert</span> a <span class="ansi-yellow-intense-fg ansi-bold">&gt;=</span> <span class="ansi-cyan-intense-fg ansi-bold">0</span><span class="ansi-yellow-intense-fg ansi-bold">,</span> <span class="ansi-blue-intense-fg ansi-bold">&#34;le nombre a n&#39;est pas positif&#34;</span>

<span class="ansi-red-intense-fg ansi-bold">AssertionError</span>: le nombre a n&#39;est pas positif</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>On pourrait donc utiliser ce m√©canisme d'assertion dans notre fonction <code>puissance(x, n)</code> de la fa√ßon suivante.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">puissance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Renvoie la valeur de x^n, o√π x est un flottant et n est un entier positif ou nul.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span> <span class="ow">and</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;n n&#39;est pas un entier positif ou nul&quot;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">r</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Avant l'√©criture du corps de la fonction, on a ajout√© une assertion (ligne 5) qui va au pr√©alable tester si le param√®tre <code>n</code> est bien un entier et que c'est bien un entier positif. Si ce n'est pas le cas, la fonction est interrompue (√† la ligne 5) et le message d'erreur sera affich√© (sinon, le programme se poursuit).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">puissance</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># pr√©condition non v√©rifi√©e</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-intense-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-intense-fg ansi-bold">AssertionError</span>                            Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">&lt;ipython-input-19-04dc12ea1cf6&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">----&gt; 1</span><span class="ansi-yellow-intense-fg ansi-bold"> </span>puissance<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-cyan-intense-fg ansi-bold">2</span><span class="ansi-yellow-intense-fg ansi-bold">,</span> <span class="ansi-yellow-intense-fg ansi-bold">-</span><span class="ansi-cyan-intense-fg ansi-bold">3</span><span class="ansi-yellow-intense-fg ansi-bold">)</span>  <span class="ansi-red-intense-fg ansi-bold"># pr√©condition non v√©rifi√©e</span>

<span class="ansi-green-intense-fg ansi-bold">&lt;ipython-input-18-36877ddaacf4&gt;</span> in <span class="ansi-cyan-fg">puissance</span><span class="ansi-blue-intense-fg ansi-bold">(x, n)</span>
<span class="ansi-green-fg">      3</span>     Renvoie la valeur de x<span class="ansi-yellow-intense-fg ansi-bold">^</span>n<span class="ansi-yellow-intense-fg ansi-bold">,</span> o√π x est un flottant et n est un entier positif ou nul<span class="ansi-yellow-intense-fg ansi-bold">.</span>
<span class="ansi-green-fg">      4</span>     &#34;&#34;&#34;
<span class="ansi-green-intense-fg ansi-bold">----&gt; 5</span><span class="ansi-yellow-intense-fg ansi-bold">     </span><span class="ansi-green-intense-fg ansi-bold">assert</span> type<span class="ansi-yellow-intense-fg ansi-bold">(</span>n<span class="ansi-yellow-intense-fg ansi-bold">)</span> <span class="ansi-yellow-intense-fg ansi-bold">==</span> int <span class="ansi-green-intense-fg ansi-bold">and</span> n <span class="ansi-yellow-intense-fg ansi-bold">&gt;=</span> <span class="ansi-cyan-intense-fg ansi-bold">0</span><span class="ansi-yellow-intense-fg ansi-bold">,</span> <span class="ansi-blue-intense-fg ansi-bold">&#34;n n&#39;est pas un entier positif ou nul&#34;</span>
<span class="ansi-green-fg">      6</span>     r <span class="ansi-yellow-intense-fg ansi-bold">=</span> <span class="ansi-cyan-intense-fg ansi-bold">1</span>
<span class="ansi-green-fg">      7</span>     <span class="ansi-green-intense-fg ansi-bold">for</span> i <span class="ansi-green-intense-fg ansi-bold">in</span> range<span class="ansi-yellow-intense-fg ansi-bold">(</span>n<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>

<span class="ansi-red-intense-fg ansi-bold">AssertionError</span>: n n&#39;est pas un entier positif ou nul</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">puissance</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1"># pr√©condition v√©rifi√©e</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[20]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>8</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>En √©crivant cette assertion, le programmeur teste au pr√©alable si les <em>pr√©conditions sont valides</em> avant d'ex√©cuter le reste du programme. On parle alors de <em>programmation d√©fensive</em>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p><strong>Remarque :</strong> il est possible de combiner plusieurs assertions. Par exemple, l'assertion pr√©c√©dente aurait pu √™tre "s√©par√©e" en les deux assertions suivantes :</p>
<div class="highlight"><pre><span></span><span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span><span class="p">,</span> <span class="s2">&quot;n n&#39;est pas un entier&quot;</span>
<span class="k">assert</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;n n&#39;est pas positif&quot;</span>
</pre></div>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p><span style="font-size:1.5em">‚úçÔ∏è</span> <strong>√Ä FAIRE :</strong> Exercices 3 et 4</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Tester-ses-programmes-pour-(se)-convaincre">Tester ses programmes pour (se) convaincre<a class="anchor-link" href="#Tester-ses-programmes-pour-(se)-convaincre">&#182;</a></h1><p>On peut tout √† fait avoir bien sp√©cifi√© et document√© sa fonction sans que celle-ci ne fonctionne comme pr√©vu. En effet, il n'est pas rare de se tromper dans le code. Pour rep√©rer les √©ventuelles erreurs, le programmeur peut utiliser sa fonction sur des cas concrets et v√©rifier que celle-ci renvoie la (ou les) bonne(s) valeur(s). On appelle cela le <em>test</em>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Utiliser-des-jeux-de-tests">Utiliser des jeux de tests<a class="anchor-link" href="#Utiliser-des-jeux-de-tests">&#182;</a></h2><p>Plut√¥t que de faire les tests manuellement un par un, il est possible d'utiliser la construction <code>assert</code> directement dans le fichier contenant le programme.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">puissance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Renvoie la valeur de x^n, o√π x est un flottant et n est un entier positif ou nul.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">r</span>

<span class="c1"># jeu de tests :</span>
<span class="k">assert</span> <span class="n">puissance</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="mi">8</span>
<span class="k">assert</span> <span class="n">puissance</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
<span class="k">assert</span> <span class="n">puissance</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
<span class="k">assert</span> <span class="n">puissance</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">32</span>
<span class="k">assert</span> <span class="n">puissance</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.25</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Si l'un de ces tests √©choue, un message indique le premier √©chec et la fonction doit √™tre corrig√©e. Une fois que la correction a √©t√© faite, il faut relancer <em>tous</em> les tests. En effet, en corrigeant la fonction il est possible d'introduire une autre erreur (et donc qu'un des tests qui passait avec succ√®s, √©choue avec la correction apport√©e).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#201;crire-ses-tests-avant-le-code-de-la-fonction">&#201;crire ses tests avant le code de la fonction<a class="anchor-link" href="#&#201;crire-ses-tests-avant-le-code-de-la-fonction">&#182;</a></h2><p>Une pratique courante consiste √† <strong>√©crire des tests <em>avant</em> m√™me d'√©crire le code de la fonction</strong>.</p>
<p>En effet, si la sp√©cification de la fonction est claire, on sait quel doit √™tre le comportement de celle-ci. Par exemple, supposons que l'on veuille √©crire une fonction <code>appartient(v, T)</code> dont la sp√©cification, √©crite dans sa docstring, est la suivante :</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">appartient</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Renvoie True si l&#39;entier v appartient √† tableau d&#39;entiers t, et False sinon.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># CODE A ECRIRE</span>
</pre></div>
<p>On conna√Æt son comportement et on peut tout suite √©crire les tests suivants.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">appartient</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Renvoie True si l&#39;entier v appartient √† tableau d&#39;entiers t, et False sinon.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># CODE DE LA FONCTION √Ä √âCRIRE</span>

    
<span class="c1"># jeu de tests</span>
<span class="k">assert</span> <span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span> <span class="o">==</span> <span class="kc">True</span>
<span class="k">assert</span> <span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span> <span class="o">==</span> <span class="kc">False</span>
<span class="k">assert</span> <span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">==</span> <span class="kc">True</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Ensuite, on peut √©crire le code de la fonction et ex√©cuter le programme. Si l'un des tests √©choue on est certain d'avoir fait une erreur et il faut la corriger. Cependant, si tous nos tests <em>passent</em>, nous ne sommes pas s√ªr que notre fonction est bien √©crite pour autant.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="L'importance-de-la-qualit&#233;-du-jeu-de-tests">L'importance de la qualit&#233; du jeu de tests<a class="anchor-link" href="#L'importance-de-la-qualit&#233;-du-jeu-de-tests">&#182;</a></h2><p>Il est souvent impossible d'√©crire de mani√®re exhaustive tous les tests possibles car il y en a bien souvent une infinit√©. Pour se convaincre que notre fonction est bien √©crite, l'enjeu consiste donc √† trouver un ensemble de tests qui couvrent les diff√©rents comportements du programme.</p>
<p>Par exemple, avec le code suivant pour la fonction <code>appartient</code> aucun des tests propos√©s n'√©choue.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">appartient</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Renvoie True si l&#39;entier v appartient √† tableau d&#39;entiers t, et False sinon.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">v</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>


<span class="c1"># jeu de tests</span>
<span class="k">assert</span> <span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span> <span class="o">==</span> <span class="kc">True</span>
<span class="k">assert</span> <span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span> <span class="o">==</span> <span class="kc">False</span>
<span class="k">assert</span> <span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">==</span> <span class="kc">True</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Tous les tests de notre jeu de tests passent avec succ√®s, super notre fonction est correcte ! üòéüí™</p>
<p>... Et pourtant, avec l'appel suivant c'est le drame ... üò≤üò±</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[23]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Cet appel met en √©vidence que <strong>le code de notre fonction est incorrect</strong> puisque 2 appartient bien au tableau <code>[0, 4, 2, 5]</code>.</p>
<p>Pire, l'appel ci-dessous ne renvoie rien alors qu'il devrait renvoyer <code>False</code> üò≤üò±...</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[])</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Notre code est donc (au moins) doublement incorrect !! Et pourtant tous les tests de notre jeu de tests sont pass√©s avec succ√®s... Cela montre que notre jeu de tests n'√©tait pas bon et que la qualit√© du jeu de tests est primordiale !</p>
<blockquote class="question">
    <p>Mais qu'est-ce qu'un <em>bon</em> jeu de tests ?</p>
</blockquote><p>Il n'est pas simple de d√©finir ce qu'est un <strong><em>bon</em> jeu de tests</strong> mais de  mani√®re g√©n√©rale, voici quelques r√®gles que l'on peut appliquer :</p>
<ul>
<li>si la sp√©cification mentionne plusieurs cas, il faut s'assurer de tous les tester ;</li>
<li>si la fonction renvoie un bool√©en, il faut s'assurer de tester les deux r√©sultats possibles ;</li>
<li>si la fonction s'applique √† un tableau, il faut tester le cas o√π le tableau est vide ;</li>
<li>si la fonction doit parcourir un tableau en entier, il faut s'assurer que celui-ci est parcouru enti√®rement ;</li>
<li>si la fonction s'applique √† un nombre, il faut s'assurer de tester des cas o√π le nombre est positif, o√π le nombre n√©gatif et o√π le nombre vaut z√©ro ;</li>
<li>si la fonction s'applique √† un nombre appartenant √† un intervalle, il faut s'assurer de tester les cas o√π le nombre est √©gal aux bornes de l'intervalle.</li>
</ul>
<blockquote><p>Essayons d'am√©liorer notre jeu de tests pour la fonction <code>appartient</code> en suivant ces pr√©conisations !</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Am&#233;liorer-le-jeu-de-tests">Am&#233;liorer le jeu de tests<a class="anchor-link" href="#Am&#233;liorer-le-jeu-de-tests">&#182;</a></h2><p>Notre jeu de tests est pour le moment le suivant :</p>
<div class="highlight"><pre><span></span><span class="c1"># jeu de tests</span>
<span class="k">assert</span> <span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span> <span class="o">==</span> <span class="kc">True</span>
<span class="k">assert</span> <span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span> <span class="o">==</span> <span class="kc">False</span>
<span class="k">assert</span> <span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">==</span> <span class="kc">True</span>
</pre></div>
<p>On a bien √©crit un test pour lequel la fonction renvoie <code>True</code> et un autre pour lequel la fonction renvoie <code>False</code>. On a pens√© √† faire un test pour un tableau particuler : celui r√©duit √† un seul √©l√©ment (le troisi√®me test). Par ailleurs, nos deux tests pour lesquels la fonction renvoie <code>True</code> sont particuliers car √† chaque fois la valeur <code>v</code> cherch√©e se trouve en premi√®re position (d'indice 0) dans le tableau.</p>
<p>Am√©liorons cela en partant des deux appels <code>appartient(2, [0, 4, 2, 5])</code> et <code>appartient(2, [])</code> effectu√©s pr√©c√©demment et qui ont montr√© que notre fonction √©tait incorrecte. Si on a analyse ces deux exemples, on se rend compte que :</p>
<ul>
<li>notre fonction ne renvoie pas la bonne valeur dans le cas d'un tableau vide. Il faudra donc int√©grer un test pour le cas tr√®s particulier du tableau vide :</li>
</ul>
<div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[])</span> <span class="o">==</span> <span class="kc">False</span>
</pre></div>
<ul>
<li>notre fonction ne renvoie pas la bonne valeur dans le cas o√π la valeur cherch√©e se trouve en "milieu" de tableau. On va int√©grer un tel test √† notre jeu de tests :</li>
</ul>
<div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span> <span class="o">==</span> <span class="kc">True</span>
</pre></div>
<p>Tant qu'√† faire, on peut ajouter un dernier test o√π la valeur <code>v</code> se trouve en derni√®re position du tableau, ce qui est aussi un cas particulier √† consid√©rer. Voici donc le jeu tests am√©lior√© propos√© (qui ne passera pas avec succ√®s puisque nous n'avons toujours pas modifi√© le code de notre fonction <code>appartient</code>) :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">appartient</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Renvoie True si l&#39;entier v appartient √† tableau d&#39;entiers t, et False sinon.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">v</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

<span class="c1"># un meilleur jeu de tests :</span>
<span class="k">assert</span> <span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span> <span class="o">==</span> <span class="kc">True</span>
<span class="k">assert</span> <span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span> <span class="o">==</span> <span class="kc">False</span>
<span class="k">assert</span> <span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">==</span> <span class="kc">True</span>
<span class="k">assert</span> <span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span> <span class="o">==</span> <span class="kc">True</span>  <span class="c1"># cas o√π v est au &quot;milieu du tableau&quot;</span>
<span class="k">assert</span> <span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span> <span class="o">==</span> <span class="kc">True</span>  <span class="c1"># cas o√π v est en derni√®re position</span>
<span class="k">assert</span> <span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[])</span> <span class="o">==</span> <span class="kc">False</span>  <span class="c1"># cas du tableau vide</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p>On va terminer en corrigeant notre fonction pour tous les tests soient valid√©s !</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Corriger-sa-fonction">Corriger sa fonction<a class="anchor-link" href="#Corriger-sa-fonction">&#182;</a></h2><p>Il n'est pas toujours √©vident de trouver pourquoi notre code ne fonctionne pas. Les tests qui √©chouent nous donne cependant de pr√©cieux √©l√©ments sur les erreurs dans le programme. En effet, <strong>c'est souvent en partant d'un test qui √©choue que l'on trouve les erreurs en suivant l'√©tat des variables</strong>.</p>
<p>Ceci peut se faire mentalement ou sur papier mais il √©galement possible d'utiliser des outils num√©riques.</p>
<h3 id="Premi&#232;re-possibilit&#233;-:-afficher-les-valeurs-de-certaines-variables">Premi&#232;re possibilit&#233; : afficher les valeurs de certaines variables<a class="anchor-link" href="#Premi&#232;re-possibilit&#233;-:-afficher-les-valeurs-de-certaines-variables">&#182;</a></h3><p>Pour un programmeur d√©butant, la premi√®re id√©e √† mettre en oeuvre est souvent d'afficher les valeurs de certaines variables √† des endroits strat√©giques du programme. Par exemple, on peut afficher la valeur de la variable <code>i</code> √† chaque tour de boucle, et afficher le message <code>"ici"</code> ou <code>"l√†"</code> selon que l'on passe dans le <code>if</code> ou dans le <code>else</code> :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[25]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">appartient</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Renvoie True si l&#39;entier v appartient √† tableau d&#39;entiers t, et False sinon.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;i =&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">v</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ici&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;l√†&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>On utilise le premier appel qui posait probl√®me :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[26]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>i = 1
l√†
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[26]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>On se rend compte que la variable <code>i</code> ne prend que la valeur <code>0</code>, autrement dit que l'on ne fait qu'un seul tour de boucle : le premier (celui d'indice <code>0</code>). De plus, lors de ce premier tour de boucle, on voit que le message <code>"l√†"</code> est affich√©, autrement dit que l'on passe dans le <code>else</code>. Or, si on arrive dans le <code>else</code> notre fonction renvoie <code>False</code>.</p>
<p>Or, il ne faut pas renvoyer <code>False</code> mais poursuivre la recherche si la valeur <code>v</code> n'est pas en premi√®re position (ni √† une autre position d'ailleurs). On peut alors corriger notre programme en retirant le <code>else</code> et en renvoyant <code>False</code> <strong>apr√®s</strong> la boucle <code>for</code> !</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[27]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">appartient</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Renvoie True si l&#39;entier v appartient √† tableau d&#39;entiers t, et False sinon.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;i =&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">v</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ici&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;l√†&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">False</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[28]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>i = 0
i = 1
i = 2
ici
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[28]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>On peut essayer √† nouveau notre jeu de tests (en enlevant les affichages) :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[29]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">appartient</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Renvoie True si l&#39;entier v appartient √† tableau d&#39;entiers t, et False sinon.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">v</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>

<span class="c1"># un meilleur jeu de tests :</span>
<span class="k">assert</span> <span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span> <span class="o">==</span> <span class="kc">True</span>
<span class="k">assert</span> <span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span> <span class="o">==</span> <span class="kc">False</span>
<span class="k">assert</span> <span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">==</span> <span class="kc">True</span>
<span class="k">assert</span> <span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span> <span class="o">==</span> <span class="kc">True</span>  <span class="c1"># cas o√π v est au &quot;milieu du tableau&quot;</span>
<span class="k">assert</span> <span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span> <span class="o">==</span> <span class="kc">True</span>  <span class="c1"># cas o√π v est en derni√®re position</span>
<span class="k">assert</span> <span class="n">appartient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[])</span> <span class="o">==</span> <span class="kc">False</span>  <span class="c1"># cas du tableau vide</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Super, tous les tests passent avec succ√®s, et comme notre jeu de tests couvre tous les cas particuliers, on peut consid√©rer que notre fonction est <em>a priori</em> correcte üëç.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Deuxi&#232;me-possibilit&#233;-:-ex&#233;cuter-un-programme-ligne-par-ligne">Deuxi&#232;me possibilit&#233; : ex&#233;cuter un programme ligne par ligne<a class="anchor-link" href="#Deuxi&#232;me-possibilit&#233;-:-ex&#233;cuter-un-programme-ligne-par-ligne">&#182;</a></h3><p>Il existe des outils efficaces permettant d'ex√©cuter ligne par ligne un programme pour y d√©celer une erreur. L'un d'entre eux se nomme <em>Python tutor</em>. Il n'est alors plus n√©cessaire d'utiliser des <code>print</code> pour faire des affichages.</p>
<p>Voici <a href="https://pythontutor.com/visualize.html#code=def%20appartient%28v,%20t%29%3A%0A%20%20%20%20%22%22%22%0A%20%20%20%20Renvoie%20True%20si%20v%20appartient%20%C3%A0%20t,%20et%20False%20sinon.%0A%20%20%20%20%22%22%22%0A%20%20%20%20for%20i%20in%20range%28len%28t%29%29%3A%0A%20%20%20%20%20%20%20%20print%28i%29%0A%20%20%20%20%20%20%20%20if%20t%5Bi%5D%20%3D%3D%20v%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20True%0A%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20False%0A%0Aappartient%282,%20%5B0,%204,%202,%205%5D%29&cumulative=false&curInstr=0&heapPrimitives=nevernest&mode=display&origin=opt-frontend.js&py=3&rawInputLstJSON=%5B%5D&textReferences=false" target="_blank">un lien vers Python tutor</a> pour ex√©cuter l'appel <code>appartient(2, [0, 4, 2, 5])</code> avec la version incorrecte de la fonction <code>appartient</code>. On peut alors suivre les ex√©cutions ligne apr√®s ligne pour se rendre compte qu'il n'y a qu'un seul tour de boucle avec renvoi de la valeur <code>False</code> d√®s ce premier tour.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Troisi&#232;me-possibilit&#233;-:-utiliser-des-outils-de-d&#233;bogage">Troisi&#232;me possibilit&#233; : utiliser des outils de d&#233;bogage<a class="anchor-link" href="#Troisi&#232;me-possibilit&#233;-:-utiliser-des-outils-de-d&#233;bogage">&#182;</a></h3><p>Enfin, les IDE les plus r√©cents proposent g√©n√©ralement des <em>d√©bogueurs</em> (ou <em>debugger</em>) qui permettent d'ex√©cuter les programmes ligne par ligne et d'ins√©rer des <em>points d'arr√™ts</em> pour stopper l'ex√©cution du programme √† certains endroits. On peut ainsi suivre les valeurs des variables pas √† pas pour trouver la ou les erreurs.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p><span style="font-size:1.5em">‚úçÔ∏è</span> <strong>√Ä FAIRE :</strong> Exercices 5, 6, 7 et 8</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Int&#233;gration-des-tests-&#224;-la-cha&#238;ne-de-documentation">Int&#233;gration des tests &#224; la cha&#238;ne de documentation<a class="anchor-link" href="#Int&#233;gration-des-tests-&#224;-la-cha&#238;ne-de-documentation">&#182;</a></h2><p>Choisir et v√©rifier des tests pertinents est un travail pr√©cieux, dont il est important de garder une trace. De plus, des tests bien choisis peuvent constituer une explication tr√®s efficace de l'effet d'une fonction.</p>
<p>Une pratique fr√©quente est d'inclure une s√©rie de tests directement dans la cha√Æne d'aide d'une fonction.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[30]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">puissance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Renvoie la valeur de x^n, o√π n est un entier positif ou nul</span>
<span class="sd">    </span>
<span class="sd">    &gt;&gt;&gt; puissance(2, 3)</span>
<span class="sd">    8</span>
<span class="sd">    </span>
<span class="sd">    &gt;&gt;&gt; puissance(0, 2)</span>
<span class="sd">    0</span>
<span class="sd">    </span>
<span class="sd">    &gt;&gt;&gt; puissance(5, 0)</span>
<span class="sd">    1</span>
<span class="sd">    </span>
<span class="sd">    &gt;&gt;&gt; puissance(-2, 5)</span>
<span class="sd">    -32</span>
<span class="sd">    </span>
<span class="sd">    &gt;&gt;&gt; puissance(0.5, 2)</span>
<span class="sd">    0.25</span>
<span class="sd">    </span>
<span class="sd">    etc.</span>
<span class="sd">    </span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">r</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Par convention, les tests prennent la forme d'expressions Python pr√©c√©d√©es de la syntaxe <code>&gt;&gt;&gt;</code>, qui repr√©sente l'invite de commande de l'interpr√©teur Python classique. Chaque expression est suivi de l'affichage (√©ventuellement vide) qui serait provoqu√© si elle √©tait √©valu√©e dans l'interpr√©teur.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Extraction-et-v&#233;rification-automatique-de-tests-:-le-module-doctest">Extraction et v&#233;rification automatique de tests : le module <em>doctest</em><a class="anchor-link" href="#Extraction-et-v&#233;rification-automatique-de-tests-:-le-module-doctest">&#182;</a></h2><p>Un outil pr√©d√©fini, accessible par le biais du module <code>doctest</code>, permet d'extraire automatiquement et de v√©rifier chacun des tests pr√©sents dans les cha√Ænes de documentation, dans toutes les fonctions d'un module par exemple (par d√©faut, les tests du module courant sont extraits et v√©rifi√©s).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[31]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">doctest</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[32]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[32]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>TestResults(failed=0, attempted=5)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Ici, il n'y a qu'une fonction qui contient des tests inclus dans sa cha√Æne de documentation. On se rend compte que les 5 tests pour la fonction <code>puissance(x, n)</code> sont pass√©s avec succ√®s.</p>
<p>Il est possible d'ajouter un param√®tre optionnel √† la fonction <code>testmod</code> afin d'obtenir plus d'informations sur les tests effectu√©s, m√™me en cas de succ√®s.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[33]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">(</span><span class="n">verbose</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Trying:
    puissance(2, 3)
Expecting:
    8
ok
Trying:
    puissance(0, 2)
Expecting:
    0
ok
Trying:
    puissance(5, 0)
Expecting:
    1
ok
Trying:
    puissance(-2, 5)
Expecting:
    -32
ok
Trying:
    puissance(0.5, 2)
Expecting:
    0.25
ok
3 items had no tests:
    __main__
    __main__.appartient
    __main__.f
1 items passed all tests:
   5 tests in __main__.puissance
5 tests in 4 items.
5 passed and 0 failed.
Test passed.
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[33]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>TestResults(failed=0, attempted=5)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p><span style="font-size:1.5em">‚úçÔ∏è</span> <strong>√Ä FAIRE :</strong> Exercice 9.</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Conclusion">Conclusion<a class="anchor-link" href="#Conclusion">&#182;</a></h1><p>Nous avons vu :</p>
<ul>
<li>comment <em>documenter</em> une fonction en sp√©cifiant son comportement de mani√®re concise et pr√©cise dans sa docstring. Cette pratique permet aux autres utilisateurs de comprendre le r√¥le de la fonction et son domaine d'utilisation (pr√©conditions sur les param√®tres) ;</li>
<li>que la construction <code>assert</code> √©tait un bon moyen d'effectuer une s√©rie de <em>tests</em> pour se convaincre que notre programme est correct et, √©ventuellement, de mettre en √©vidence des erreurs ;</li>
<li>qu'il est possible de rechercher les erreurs en <em>affichant les valeurs</em> de certaines variables √† des endroits strat√©giques ou, de mani√®re plus professionnelle, utiliser des <em>debogueurs</em> ;</li>
<li>qu'il n'y a pas de m√©thode syst√©matique pour s'assurer qu'on a pens√© √† tous les tests importants : il faut donc √™tre particuli√®rement vigilant pour √©laborer un <em>jeu de tests de qualit√©</em> ;</li>
<li>en particulier, le succ√®s d‚Äôun jeu de tests ne garantit pas qu'un programme est correct ;</li>
<li>qu'il existe une syntaxe permettant d'inclure les tests dans la cha√Æne de documentation et un outil (comme le module <code>doctest</code>) permettant de les extraire et de les v√©rifier automatiquement.</li>
</ul>
<p><strong>Pour aller plus loin</strong></p>
<ul>
<li><p>Il existe bien d'autres outils de documentation (pydoc, Sphinx) et de test (pytest, unittest), pour des usages plus complexes.</p>
</li>
<li><p>Il est possible, de mani√®re optionnelle, d'indiquer dans l'en-t√™te d'une fonction le type de certains param√®tres et / ou du r√©sultat. Cela peut √™tre utile par exemple pour all√©ger la cha√Æne de documentation. Il existe aussi des outils externes qui permettent de v√©rifier que ces annotations de types sont v√©rifi√©es.</p>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>
<p><strong>R√©f√©rences :</strong></p>
<ul>
<li>Documents ressources du DIU EIL, Universit√© de Nantes, C. DECLERCQ.</li>
<li>Num√©rique et Sciences Informatiques, 1re, T. BALABONSKI, S. CONCHON, J.-C. FILLIATRE, K. NGUYEN, √©ditions ELLIPSES : <a href="https://www.nsi-premiere.fr/">Site du livre</a></li>
<li>Ressource Eduscol : <a href="https://cache.media.eduscol.education.fr/file/NSI/77/3/RA_Lycee_G_NSI_lang_tests_1170773.pdf">Mise au point de programmes test√©s</a></li>
</ul>
<hr>
<p>Germain BECKER &amp; S√©bastien POINT, Lyc√©e Mounier, ANGERS <img src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" alt="Licence Creative Commons"></p>

</div>
</div>
</div>
 

